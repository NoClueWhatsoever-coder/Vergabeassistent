<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Beschaffungsvorhaben – VergabeAssist</title>
  <link rel="stylesheet" href="css/style.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <!-- Supabase JS laden -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
<header>
  <!-- Burger-Menü links im Header -->
  <div id="burgerMenu" class="burger-menu" onclick="toggleSidebarMenu()" style="position:absolute;left:2rem;top:1.4rem;">
    <span></span><span></span><span></span>
  </div>
  <div class="header-center">
    <a href="index.html" tabindex="0">
      <img src="img/logo_govdisrupt_ai.png" alt="GovDisrupt AI Logo" class="header-firm-logo" style="cursor:pointer;">
    </a>
  </div>
  <!-- Account-Icon rechts oben -->
  <button id="loginTopBtn" class="login-top-btn" onclick="window.location.href='account.html'" aria-label="Account"
    style="display:block;position:absolute;right:2rem;top:1.2rem;">
    <span class="material-icons" style="font-size:1.9em;vertical-align:middle;">account_circle</span>
    <span style="font-size:1em;margin-left:0.35em;">Account</span>
  </button>
</header>

<!-- Overlay für Sidebar -->
<div id="sidebarOverlay" class="sidebar-overlay"></div>
<!-- Sidebar-Menü wie auf dem Dashboard -->
<aside id="sidebarMenu" class="sidebar-menu-left">
  <nav class="sidebar-links">
    <a href="dashboard.html"><span class="material-icons">dashboard</span> Projekte</a>
    <a href="vorlagen.html"><span class="material-icons">collections_bookmark</span> Vorlagen</a>
    <a href="account.html"><span class="material-icons">person</span> Account</a>
  </nav>
</aside>

<!-- Hauptbereich: volle Breite mit Projekt‑Klasse -->
<main class="project-main">

  <!-- Breadcrumb ganz oben im Main-Bereich -->
  <nav class="breadcrumb-nav-top">
    <a href="index.html"><span class="material-icons" style="vertical-align:-0.25em;font-size:1.1em;">home</span> Startseite</a>
    <span class="breadcrumb-sep">›</span>
    <a href="dashboard.html">Dashboard</a>
    <span class="breadcrumb-sep">›</span>
    <span class="breadcrumb-current">Projekt</span>
  </nav>

  <!-- Projektdetails -->
  <section class="projekt-info" style="margin-bottom:2em;">
    <h2 id="projektTitel">Lädt...</h2>
    <div style="display:grid;grid-template-columns:1fr 1fr;gap:0.7em;">
      <div><b>Art:</b> <span id="projektArt">–</span></div>
      <div><b>Frist:</b> <span id="projektFrist">–</span></div>
      <div><b>Schätzwert:</b> <span id="projektSchaetzwert">–</span></div>
      <div><b>CPV-Code:</b> <span id="projektCPV">–</span></div>
    </div>
    <div style="margin-top:1em;display:flex;justify-content:space-between;align-items:center;">
      <div><b>Status:</b> <span id="projektStatus">–</span></div>
    </div>
  </section>

  <!-- Hinweis: Die zusätzlichen Angaben wurden auf die Seite "Eigenerklärungen" verschoben -->


  <!-- Chatbereich -->
  <section class="chat-container">
    <div class="chat-header">
      <h3 style="display:inline;">Bedarfsbeschreibung</h3>
      <span class="material-icons info-icon" style="margin-left:0.5em;font-size:1.38em;vertical-align:-0.12em;cursor:help;color:#2777b6;"
            title="Bitte beschreibe deinen Bedarf so detailliert wie möglich oder lade eine Datei hoch.">
        info
      </span>
    </div>
    <div id="fileBubbleRow" class="filebubble-row"></div>
    <div id="chatMessages" class="chat-messages"></div>
    <div class="chat-input-bar">
      <textarea id="chatInput" placeholder="Beschreibung eingeben..." autocomplete="off"></textarea>
      <div class="chat-input-row">
        <!-- Datei-Uploadblock LINKS unter dem Textfeld -->
        <div class="chat-upload-block">
          <label class="upload-btn" title="Datei hinzufügen">
            <span class="upload-plus">+</span>
            <input type="file" id="fileUpload" accept=".txt,.docx,.pdf,.json,.xml,.x83,.xlsx,.csv" multiple />
          </label>
          <span class="upload-label">Datei auswählen</span>
        </div>
        <!-- Senden rechts unten -->
        <button id="sendBtn">Senden</button>
      </div>
    </div>
  </section>

  <!-- Aktionen: Nächste Schritte -->
  <div style="margin:2.2em 0 1em 0; text-align:center;">
    <h3>Nächste Schritte im Projekt</h3>
    <div style="display:flex;flex-wrap:wrap;gap:1.3em;justify-content:center;">
      <button id="btnVergabeUnterlagen" style="padding:1.1em 2.2em;font-size:1.1em;border-radius:12px;border:none;background:#0077b6;color:#fff;font-weight:600;box-shadow:0 2px 10px #0077b63b;cursor:pointer;">
        📄 Leistungsverzeichnis erstellen
      </button>
      <button id="btnMarkterkundung" style="padding:1.1em 2.2em;font-size:1.1em;border-radius:12px;border:none;background:#4e80bb;color:#fff;font-weight:600;box-shadow:0 2px 10px #0077b63b;cursor:pointer;">
        🔍 Markterkundung (bald)
      </button>
      <button id="btnRechtsfragen" style="padding:1.1em 2.2em;font-size:1.1em;border-radius:12px;border:none;background:#b0bec5;color:#fff;font-weight:600;box-shadow:0 2px 10px #0077b63b;cursor:pointer;">
        ⚖️ Vergaberechtliche Fragen
      </button>
    </div>
    <div style="margin-top:1em;color:#777;">
      Wählen Sie die nächste Aktion für dieses Projekt.
    </div>
  </div>

  <!-- Schließe den Main‑Bereich vor dem Footer -->
  </main>

<footer style="display:flex;align-items:center;gap:1.4em;">
  <img src="img/logo_govdisrupt_ai.png" alt="Firmenlogo" style="height:36px;margin-right:1.4em;">
  <span style="flex:1;">
    &copy; 2025 VergabeAssistent |
    <a href="impressum.html" target="_blank">Impressum</a> |
    <a href="datenschutz.html" target="_blank">Datenschutz</a> |
    <a href="nutzungsbedingungen.html" target="_blank">Nutzungsbedingungen</a> |
    <a href="avv.html" target="_blank">AVV</a>
  </span>
</footer>


<script src="js/projekt.js"></script>

<!-- Sidebar‑Logik wie auf dem Dashboard -->
<script>
function toggleSidebarMenu(force = false) {
  const sidebar = document.getElementById('sidebarMenu');
  const overlay = document.getElementById('sidebarOverlay');
  const isOpen = sidebar.classList.contains('open');
  if (isOpen || force) {
    sidebar.classList.remove('open');
    overlay.classList.remove('active');
    sessionStorage.setItem('sidebarMenuClosed', '1');
  } else {
    sidebar.classList.add('open');
    overlay.classList.add('active');
    sessionStorage.removeItem('sidebarMenuClosed');
    setTimeout(() => sidebar.focus && sidebar.focus(), 120);
  }
}
document.addEventListener('DOMContentLoaded', () => {
  if (!sessionStorage.getItem('sidebarMenuClosed')) {
    document.getElementById('sidebarMenu').classList.add('open');
    document.getElementById('sidebarOverlay').classList.add('active');
  }
});
document.getElementById('sidebarOverlay').onclick = () => toggleSidebarMenu(true);
document.addEventListener('keydown', e => {
  if (e.key === 'Escape') toggleSidebarMenu(true);
});
</script>

<!-- Die Projektseite benötigt keine eigene Kollaps‑Logik mehr; die zusätzlichen Angaben befinden sich jetzt auf einer anderen Seite. -->

</body>
</html>
