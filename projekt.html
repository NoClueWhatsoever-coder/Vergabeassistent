<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Beschaffungsvorhaben – VergabeAssist</title>
  <link rel="stylesheet" href="css/style.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <!-- Supabase JS laden -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <style>
    main {
      max-width: 980px !important;
      margin: 2.4em auto !important;
      padding: 0 1vw;
    }
    .chat-container {
      width: 100%;
      max-width: 100%;
      margin: 0 auto;
      box-sizing: border-box;
    }
    .upload-btn input[type="file"] { display: none; }
    .upload-btn {
      display: flex; align-items: center; justify-content: center;
      background: #e9f5ff; color: #0077b6; border-radius: 50%; border: none;
      width: 2.2em; height: 2.2em; font-size: 1.7em; cursor: pointer;
      margin-top: 0.1em; box-shadow: 0 1px 4px #0077b616;
      transition: background 0.13s;
    }
    .upload-btn:hover { background: #c6e6ff; }
    @media (max-width: 1000px) {
      main { max-width: 99vw !important; }
      .chat-container { max-width: 99vw; }
    }
  </style>
</head>
<body>
<header>
  <div style="display:flex;align-items:center;gap:1em;">
    <a href="dashboard.html" style="text-decoration:none;color:#0077b6;font-weight:700;font-size:1.2em;">&#8592; Zurück zum Dashboard</a>
    <img src="img/logo_govdisrupt_ai.png" alt="GovDisrupt AI Logo" class="header-firm-logo">
  </div>
</header>

<main
  <!-- Projektdetails -->
  <section class="projekt-info" style="margin-bottom:2em;">
    <h2 id="projektTitel">Lädt...</h2>
    <div style="display:grid;grid-template-columns:1fr 1fr;gap:0.7em;">
      <div><b>Art:</b> <span id="projektArt">–</span></div>
      <div><b>Frist:</b> <span id="projektFrist">–</span></div>
      <div><b>Schätzwert:</b> <span id="projektSchaetzwert">–</span></div>
      <div><b>CPV-Code:</b> <span id="projektCPV">–</span></div>
    </div>
    <div style="margin-top:1em;display:flex;justify-content:space-between;align-items:center;">
      <div><b>Status:</b> <span id="projektStatus">–</span></div>
    </div>
  </section>

  <!-- Chatbereich -->
  <section class="chat-container fix-max-breite">
    <div class="chat-header">
      <h3 style="display:inline;">Bedarfsbeschreibung & Verlauf</h3>
      <span class="info-icon" title="Bitte beschreiben Sie Ihren Bedarf so detailliert wie möglich oder laden Sie eine Datei hoch." style="margin-left:1em;cursor:help;">ℹ️</span>
    </div>
    <div id="fileBubbleRow" class="filebubble-row"></div>
    <div id="chatMessages" class="chat-messages"></div>
    <div class="chat-input-bar">
      <textarea id="chatInput" placeholder="Beschreibung eingeben..." autocomplete="off"></textarea>
      <div class="chat-input-row">
        <!-- Datei-Uploadblock LINKS unter dem Textfeld -->
        <div class="chat-upload-block">
          <label class="upload-btn" title="Datei hinzufügen">
            <span class="upload-plus">+</span>
            <input type="file" id="fileUpload" accept=".txt,.docx,.pdf,.json,.xml,.x83,.xlsx,.csv" multiple />
          </label>
          <span class="upload-label">Datei auswählen</span>
        </div>
        <!-- Senden rechts unten -->
        <button id="sendBtn">Senden</button>
      </div>
    </div>
  </section>
  <!-- Abschließen-Button ZENTRAL darunter -->
  <div style="margin:1.7em 0 0 0;text-align:center;">
    <button id="abschliessenBtn" style="display:none;">LV als abgeschlossen markieren</button>
  </div>
</main>

<footer style="margin:2em auto;text-align:center;">
  <img src="img/logo_govdisrupt_ai.png" alt="Logo" style="height:36px;margin-right:1.4em;">
  <span>&copy; 2025 VergabeAssist | Impressum | Datenschutz</span>
</footer>

<script src="js/projekt.js"></script>
</body>
</html>
