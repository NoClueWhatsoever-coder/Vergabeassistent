<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vergabeunterlagen ‚Äì √úbersicht & Export</title>
    <!-- Einbinden der globalen Styles und Schriftarten f√ºr ein konsistentes Design -->
    <link rel="stylesheet" href="css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <header>
        <!-- Link zur√ºck zum Projekt. Der href wird per Skript gesetzt, sobald die Projekt-ID bekannt ist. -->
        <div style="display:flex;align-items:center;gap:1em;">
            <a id="backLink" href="#" style="text-decoration:none;color:#0077b6;font-weight:700;font-size:1.2em;">
                &#8592; Zur√ºck zum Projekt
            </a>
        </div>
        <div class="header-center">
            <a href="index.html" tabindex="0">
                <img src="img/logo_govdisrupt_ai.png" alt="GovDisrupt AI Logo" class="header-firm-logo" style="cursor:pointer;">
            </a>
        </div>
    </header>
    <main>
        <div class="breadcrumb-top">
            <a href="index.html" class="breadcrumb-link">
                <span style="font-size:1.3em;vertical-align:middle;">üè†</span>
                Zur√ºck zur Startseite
            </a>
        </div>

        <section class="section" id="overview">
            <h2>√úbersicht</h2>
            <p>Hier sehen Sie alle bisher generierten Dokumente Ihres Projekts. Sobald Sie ein Modul abschlie√üen, erscheint das Dokument in der entsprechenden Liste.</p>
            <!-- Leistungsverzeichnis -->
            <h3>Leistungsverzeichnis</h3>
            <ul class="documents" id="lvList">
                <li>Noch kein LV erstellt.</li>
            </ul>
            <button id="createLvBtn" style="margin-bottom:1.2em;">LV erstellen</button>
            <!-- Eignungskriterien -->
            <h3>Eignungskriterien</h3>
            <ul class="documents" id="eignungList">
                <li>Noch keine Eignungskriterien generiert.</li>
            </ul>
            <button id="createEignungBtn" style="margin-bottom:1.2em;">Eignungskriterien erstellen</button>
            <!-- Zuschlagskriterien -->
            <h3>Zuschlagskriterien</h3>
            <ul class="documents" id="zuschlagList">
                <li>Noch keine Zuschlagskriterien generiert.</li>
            </ul>
            <button id="createZuschlagBtn" style="margin-bottom:1.2em;">Zuschlagskriterien erstellen</button>
            <!-- Eigenerkl√§rungen -->
            <h3>Eigenerkl√§rungen</h3>
            <!-- Neuer Button f√ºr Formblatt 124 ist weiterhin vorhanden -->
            <button id="addFormblatt124Btn" style="margin-bottom:0.8em;">Formblatt 124 automatisch generieren & hinzuf√ºgen</button>
            <ul class="documents" id="declarationList">
                <li>Keine Eigenerkl√§rungen ausgew√§hlt.</li>
            </ul>
            <button id="createDeclarationBtn" style="margin-bottom:1.2em;">Eigenerkl√§rungen ausw√§hlen</button>
            <!-- Vertragsbedingungen -->
            <h3>Vertragsbedingungen</h3>
            <ul class="documents" id="contractList">
                <li>Keine Vertragsbedingungen vorgeschlagen.</li>
            </ul>
            <button id="createContractBtn" style="margin-bottom:1.2em;">Vertragsbedingungen ausw√§hlen</button>
        </section>
        <section class="section" id="templates">
            <h2>Vorlagen verwenden</h2>
            <p>Sie k√∂nnen hier aus bereits gespeicherten Dokumentenvorlagen ausw√§hlen. Die Projektdaten werden automatisch in die Vorlage eingef√ºgt.</p>
            <label for="templateSelect">Vorlage ausw√§hlen:</label>
            <div class="template-list">
                <select id="templateSelect">
                    <option value="">Bitte w√§hlen‚Ä¶</option>
                    <option value="lv_standard">LV‚ÄëStandardvorlage</option>
                    <option value="criteria_standard">Kriterienkatalog Standard</option>
                    <option value="declaration_tax">Eigenerkl√§rung Steuerehrlichkeit</option>
                    <option value="contract_evb_it">EVB‚ÄëIT Vertrag Standard</option>
                </select>
                <button onclick="addTemplate()">Hinzuf√ºgen</button>
            </div>
        </section>
        <section class="section" id="export">
            <h2>Exportieren</h2>
            <p>Sobald alle ben√∂tigten Dokumente vorhanden sind, k√∂nnen Sie das vollst√§ndige Vergabepaket exportieren. W√§hlen Sie das gew√ºnschte Format:</p>
            <div class="export-buttons">
                <button onclick="exportDocs('pdf')">Als PDF herunterladen</button>
                <button onclick="exportDocs('docx')">Als DOCX herunterladen</button>
                <button onclick="exportDocs('zip')">Als ZIP herunterladen</button>
            </div>
        </section>
    </main>
    
    <footer id="kontakt" style="display:flex;align-items:center;gap:1.4em;">
        <img src="img/logo_govdisrupt_ai.png" alt="Firmenlogo" style="height:36px;margin-right:1.4em;">
        <span style="flex:1;">
            &copy; 2025 VergabeAssist |
            <a href="impressum.html" target="_blank">Impressum</a> |
            <a href="datenschutz.html" target="_blank">Datenschutz</a> |
            <a href="nutzungsbedingungen.html" target="_blank">Nutzungsbedingungen</a> |
            <a href="avv.html" target="_blank">AVV</a>
        </span>
    </footer>

    <script src="vergabeunterlagen.js"></script>
    <script>
        // Diese Funktionen kannst du f√ºr die Vorlagen-Demo weiter nutzen:
        function addTemplate() {
            const select = document.getElementById('templateSelect');
            const value = select.value;
            if (!value) return;
            let targetList;
            if (value.startsWith('lv')) targetList = document.getElementById('lvList');
            else if (value.startsWith('criteria')) targetList = document.getElementById('eignungList');
            else if (value.startsWith('declaration')) targetList = document.getElementById('declarationList');
            else if (value.startsWith('contract')) targetList = document.getElementById('contractList');
            else targetList = null;
            if (targetList) {
                // Remove placeholder item
                if (targetList.children.length === 1) {
                    targetList.removeChild(targetList.children[0]);
                }
                const li = document.createElement('li');
                li.textContent = select.options[select.selectedIndex].text + ' (Vorlage)';
                targetList.appendChild(li);
            }
        }
        function exportDocs(format) {
            alert('Export als ' + format + ' ist noch nicht implementiert. Hier w√ºrde die Anwendung alle Dokumente zusammenstellen und zum Download bereitstellen.');
        }
        // Neue Initialisierung f√ºr Breadcrumb und Erstellen-Buttons
        document.addEventListener('DOMContentLoaded', () => {
            const params = new URLSearchParams(window.location.search);
            const id = params.get('id');
            // Backlink zum Projekt setzen
            const backLink = document.getElementById('backLink');
            if (backLink && id) {
                backLink.href = `projekt.html?id=${encodeURIComponent(id)}`;
            }
            // Buttons f√ºr Erstellung weiterleiten
            const createLvBtn = document.getElementById('createLvBtn');
            if (createLvBtn && id) {
                createLvBtn.onclick = () => {
                    window.location.href = `lv_generator.html?id=${encodeURIComponent(id)}`;
                };
            }
            const createEignungBtn = document.getElementById('createEignungBtn');
            if (createEignungBtn && id) {
                createEignungBtn.onclick = () => {
                    window.location.href = `eignungskriterien_generator.html?id=${encodeURIComponent(id)}`;
                };
            }
            const createZuschlagBtn = document.getElementById('createZuschlagBtn');
            if (createZuschlagBtn && id) {
                createZuschlagBtn.onclick = () => {
                    window.location.href = `zuschlagskriterien_generator.html?id=${encodeURIComponent(id)}`;
                };
            }
            const createDeclarationBtn = document.getElementById('createDeclarationBtn');
            if (createDeclarationBtn && id) {
                createDeclarationBtn.onclick = () => {
                    window.location.href = `eigenerklaerungen_generator.html?id=${encodeURIComponent(id)}`;
                };
            }
            const createContractBtn = document.getElementById('createContractBtn');
            if (createContractBtn && id) {
                createContractBtn.onclick = () => {
                    window.location.href = `contracts_generator.html?id=${encodeURIComponent(id)}`;
                };
            }
        });
    </script>
</body>
</html>
